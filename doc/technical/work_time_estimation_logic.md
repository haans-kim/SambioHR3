# 근무시간 추정 로직 설명

## 개념 정리

### 1. 체류시간 vs 실근무시간

**체류시간 (Total Hours)**
- 출근 시각 ~ 퇴근 시각까지의 전체 시간
- 예: 07:32 출근, 19:21 퇴근 = 11.8시간
- 식사, 휴식, 이동 등 모든 시간 포함

**실근무시간 (Actual Work Hours)**
- 체류시간 중 실제로 일한 시간
- 식사시간, 휴식시간, 비업무 활동 제외
- 이것이 우리가 추정하려는 값

### 2. 추정률과 신뢰구간

**추정률 (Estimation Rate)**
- 체류시간 중 실제 근무 비율
- 예: 30% = 체류시간의 30%만 실제 근무로 추정
- 직군별 차이:
  - 생산직: 70-85% (태그 데이터 풍부)
  - 사무직: 20-65% (태그 데이터 부족)

**신뢰구간 (Confidence Interval)**
- 추정의 불확실성 범위
- 95% 신뢰수준에서의 상한/하한
- 예: 20%-40% = 최소 20%, 최대 40%가 실근무

## 계산 예시

### 사무직 직원 사례
```
체류시간: 9.2시간 (07:32 ~ 19:21, 점심시간 포함)
추정률: 30% (사무직, 낮은 신뢰도)
신뢰구간: 20% ~ 40%

계산:
- 최소 실근무 = 9.2 × 0.20 = 1.8시간
- 추정 실근무 = 9.2 × 0.30 = 2.8시간
- 최대 실근무 = 9.2 × 0.40 = 3.7시간
```

### 왜 이렇게 낮게 나오는가?

1. **데이터 부족**
   - 하루 태그 수: 10-30개 (생산직의 1/10)
   - 주요 활동: 회의 2-3건, 결재 1-2건 정도
   - 대부분 시간이 "빈 공간"

2. **꼬리물기 의심**
   - 입문 후 2시간 활동 없음
   - 퇴문 전 2시간 활동 없음
   - 실제 활동 3개 미만

3. **보수적 추정**
   - 데이터가 없는 시간 = 근무하지 않은 것으로 가정
   - 활동이 있는 시간만 근무로 인정

## UI 표시 설명

### 상단: 추정 신뢰도
- 게이지: 30% (낮은 신뢰도)
- 근무 유형: 사무직
- 신뢰구간: 20%-40%

### 하단: 추정 근무시간
```
📍 전체 체류시간: 9.2시간 (출근~퇴근)

최소 실근무      추정 실근무      최대 실근무
1.8시간         2.8시간         3.7시간
               ±0.9시간
```

## 개선 방향

### 1. 추가 데이터 연동
- PC 로그온/오프 시간
- 이메일 발송 시간
- 시스템 사용 로그
- 회의실 예약 데이터

### 2. 패턴 학습
- 개인별 근무 패턴 학습
- 부서별 특성 반영
- 요일별/시간대별 패턴

### 3. 검증 방법
- 초과근무 신청 기록과 비교
- 프로젝트 작업 시간과 대조
- 회의 일정과 매칭

## FAQ

**Q: 왜 사무직이 이렇게 낮게 나오나요?**
A: 사무직은 PC 작업이 주된 업무라 태그 데이터가 적습니다. 회의실 이동이나 시스템 로그인 정도만 기록되어 대부분의 업무 시간이 누락됩니다.

**Q: 생산직과 차이가 큰 이유는?**
A: 생산직은 장비 조작(O태그), 작업장 이동, 자재 운반 등 물리적 활동이 많아 태그 데이터가 풍부합니다. 시간당 20-30개 태그 vs 사무직 2-5개.

**Q: 신뢰도를 높이려면?**
A: 
1. 태그 리더기 추가 설치 (사무실 내부)
2. PC 사용 로그 연동
3. 그룹웨어 활동 데이터 통합
4. 출입 카드 데이터 정밀화

**Q: 꼬리물기란?**
A: 동료와 함께 입문한 후 실제로는 근무하지 않고 외출하거나 휴식하는 행위. 입문 후 2시간 이상 활동이 없으면 의심됩니다.