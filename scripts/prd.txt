# Product Requirements Document: 태그 기반 활동 분류 시스템 구현

## 프로젝트 개요
기존의 복잡한 HMM(Hidden Markov Model) 기반 시스템을 단순화하여, 태그 기반의 규칙 중심 활동 분류 시스템으로 전환합니다. 이는 Viterbi와 Baum-Welch 알고리즘의 복잡성을 제거하고, 더 명확하고 유지보수가 쉬운 시스템을 구축하는 것을 목표로 합니다.

## 현재 상황
- 17개 상태의 HMM 모델이 과도하게 복잡함
- Viterbi와 Baum-Welch 알고리즘이 유지보수하기 어려움
- 실무에서는 명확한 규칙 기반 분류가 더 효과적일 것으로 예상

## 새로운 시스템 요구사항

### 1. 태그 체계 구현 (12개 태그)
- G1-G4: 업무 관련 공간 태그
- N1-N2: 비업무 관련 공간 태그
- T1-T3: 이동 관련 태그
- M1-M2: 식사 관련 태그
- O: 실제 업무 수행 로그

### 2. 상태 정의 (11개 상태)
- 업무, 준비, 회의, 교육, 휴게, 식사, 경유, 출입(IN/OUT), 비업무

### 3. 시간 기반 확률 조정
- 시간대별 가중치 적용 (교대시간, 식사시간 등)
- 체류 시간에 따른 상태 확률 변경

### 4. 전환 규칙 매트릭스
- 태그 간 전환에 대한 확률 정의
- O 태그를 활용한 업무 상태 확정 로직

### 5. 이상 패턴 감지
- 꼬리물기 감지 개선
- 장시간 외출 및 비업무 패턴 식별

## 기술적 요구사항

### 데이터베이스 수정
- 태그 코드 저장을 위한 스키마 업데이트
- 전환 확률 매트릭스 저장 구조
- 시간대별 가중치 테이블

### 분석 엔진 재구현
- HMM 모델 대신 규칙 기반 엔진 구현
- 실시간 상태 분류 로직
- 확률 에디터 기능

### UI 업데이트
- 태그 기반 상태 표시
- 확률 조정 인터페이스
- 이상 패턴 알림 기능

### 기존 코드 마이그레이션
- HMM 관련 코드 비활성화/제거
- 새로운 분류 엔진과의 통합
- 기존 데이터 마이그레이션 전략

## 성공 지표
- 분류 정확도 90% 이상
- 처리 속도 50% 향상
- 규칙 수정 시간 80% 단축
- 꼬리물기 감지 정확도 85% 이상

## 제약사항
- 기존 데이터와의 호환성 유지
- 실시간 처리 성능 보장
- 사용자 교육 최소화